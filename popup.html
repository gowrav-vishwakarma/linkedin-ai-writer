<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8"/>
    <title>Enter API Key</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

</head>

<body class="bg-light" style="width: 800px">
<div class="container mt-5">
    <h2 class="text-center">AI Provider Configuration</h2>
    <form class="mt-4" id="provider-form">
        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    <label for="provider-select">AI Provider:</label>
                    <select id="provider-select" class="form-control" required>
                        <option value="openai">OpenAI</option>
                        <option value="anthropic">Anthropic Claude</option>
                        <option value="gemini">Google Gemini</option>
                        <option value="ollama">Ollama (Local)</option>
                        <option value="lmstudio">LM Studio (Local)</option>
                        <option value="groq">Groq</option>
                        <option value="together">Together AI</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="api-key">API Key:</label>
                    <input type="password" id="api-key" name="api-key" class="form-control" placeholder="Enter your API key"/>
                    <small class="form-text text-muted" id="api-key-help">
                        Required for OpenAI, Anthropic, Gemini, Groq, and Together AI
                    </small>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="model-select">Model:</label>
                    <select id="model-select" class="form-control">
                        <option value="">Use default model</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="custom-endpoint">Custom Endpoint (Optional):</label>
                    <input type="url" id="custom-endpoint" class="form-control" placeholder="http://localhost:11434/api/generate"/>
                    <small class="form-text text-muted">
                        Override the default endpoint for this provider
                    </small>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="max-tokens">Max Tokens:</label>
                    <input type="number" id="max-tokens" class="form-control" min="1" max="4000" value="1000"/>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="temperature">Temperature:</label>
                    <input type="range" id="temperature" class="form-control-range" min="0" max="2" step="0.1" value="0.7"/>
                    <small class="form-text text-muted">
                        <span id="temperature-value">0.7</span> (0 = deterministic, 2 = creative)
                    </small>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <div class="form-check mt-4">
                        <input class="form-check-input" type="checkbox" id="supports-media" />
                        <label class="form-check-label" for="supports-media">
                            Supports media (images/video frames)
                        </label>
                        <small class="form-text text-muted">
                            Uncheck to send text-only prompts to the model
                        </small>
                    </div>
                    <div class="form-group mt-3" id="video-frame-options" style="display: none;">
                        <label for="video-frame-strategy">Video Frame Extraction:</label>
                        <select id="video-frame-strategy" class="form-control">
                            <option value="minimal">Minimal (5 frames: start, 25%, 50%, 75%, end)</option>
                            <option value="moderate">Moderate (10 frames: every 10% of video)</option>
                            <option value="dense">Dense (every 0.5 seconds)</option>
                            <option value="very-dense">Very Dense (every 0.25 seconds)</option>
                            <option value="custom">Custom (specify number of frames)</option>
                        </select>
                        <div id="custom-frame-count" class="mt-2" style="display: none;">
                            <label for="frame-count">Number of frames:</label>
                            <input type="number" id="frame-count" class="form-control" min="1" max="100" value="5" />
                            <small class="form-text text-muted">
                                Higher values = more context usage. Choose based on your model's limits.
                            </small>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary mt-4">Save Configuration</button>
                    <button type="button" id="test-connection" class="btn btn-info mt-4 ml-2">Test Connection</button>
                </div>
            </div>
        </div>
    </form>
    
    <div id="connection-status" class="mt-3" style="display: none;">
        <div class="alert alert-info">
            <strong>Connection Status:</strong> <span id="status-text"></span>
        </div>
    </div>


    <h2 class="text-center mt-5">Manage Prompts:</h2>

    <div class="alert alert-info">
        <h5>ðŸ“· Media Support Added!</h5>
        <p class="mb-2">The extension now supports vision models that can analyze images from LinkedIn posts:</p>
        <ul class="mb-2">
            <li><strong>OpenAI:</strong> gpt-4o, gpt-4-vision-preview</li>
            <li><strong>Anthropic:</strong> claude-3-5-sonnet-20241022, claude-3-opus-20240229</li>
            <li><strong>Google Gemini:</strong> gemini-2.0-flash-exp, gemini-1.5-flash</li>
            <li><strong>Ollama (Local):</strong> llava:7b/13b/34b, llama3.2-vision:3b/11b, qwen2.5-vl:3b/7b</li>
            <li><strong>LM Studio (Local):</strong> qwen2.5-vl-7b/3b, llava-7b/13b/34b</li>
        </ul>
        <p class="mb-0">When commenting on posts with images, the AI will automatically analyze the visual content along with the text!</p>
    </div>
    
    <p class="text-muted">
        In your prompts, you can use the following placeholders:
        <ul>
            <li><code>$text</code> - The text you're currently writing.</li>
            <li><code>$post</code> - The original post's content.</li>
            <li><code>$comment</code> - The content of the comment you're replying to.</li>
        </ul>
        These placeholders will be replaced with the actual content when generating the response.
        <br><br>
        <strong>Note:</strong> When using vision models, images from the original post will be automatically included in the analysis.
    </p>
    <div id="prompts-container" class="mt-3">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>Position</th>
                <th>Label</th>
                <th>Prompt Text</th>
                <th>Replace Text</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody id="prompts-tbody">
            <!-- This will be populated dynamically from popup.js -->
            </tbody>
        </table>
    </div>

    <div class="mt-3">
        <button id="add-prompt" class="btn btn-success">Add New Prompt</button>
        <button id="save-prompts" class="btn btn-info">Save Prompts</button>
    </div>
</div>
<div class="text-center mt-4">
    Made with love by <a href="https://www.linkedin.com/in/gowravvishwakarma/">Gowrav Vishwakarma</a>
    <br/>
    Fork and update this useless tool ;) <a href="https://github.com/gowrav-vishwakarma/linkedin-ai-writer.git">Github</a>
</div>
<script src="providers.js"></script>
<script src="popup.js"></script>
</body>


</html>